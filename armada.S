#HOORAY ABUSED THE GBA HEADER!
.arm
#ENTRY POINT
b a
#GBA LOGO
.byte 0x24,0xFF,0xAE,0x51,0x69,0x9A,0xA2,0x21
.byte 0x3D,0x84,0x82,0x0A,0x84,0xE4,0x09,0xAD
.byte 0x11,0x24,0x8B,0x98,0xC0,0x81,0x7F,0x21
.byte 0xA3,0x52,0xBE,0x19,0x93,0x09,0xCE,0x20
.byte 0x10,0x46,0x4A,0x4A,0xF8,0x27,0x31,0xEC
.byte 0x58,0xC7,0xE8,0x33,0x82,0xE3,0xCE,0xBF
.byte 0x85,0xF4,0xDF,0x94,0xCE,0x4B,0x09,0xC1
.byte 0x94,0x56,0x8A,0xC0,0x13,0x72,0xA7,0xFC

.byte 0x9F,0x84,0x4D,0x73,0xA3,0xCA,0x9A,0x61
.byte 0x58,0x97,0xA3,0x27,0xFC,0x03,0x98,0x76
.byte 0x23,0x1D,0xC7,0x61,0x03,0x04,0xAE,0x56
.byte 0xBF,0x38,0x84,0x00,0x40,0xA7,0x0E,0xFD
.byte 0xFF,0x52,0xFE,0x03,0x6F,0x95,0x30,0xF1
.byte 0x97,0xFB,0xC0,0x85,0x60,0xD6,0x80,0x25
.byte 0xA9,0x63,0xBE,0x03,0x01,0x4E,0x38,0xE2
.byte 0xF9,0xA2,0x34,0xFF,0xBB,0x3E,0x03,0x44

.byte 0x78,0x00,0x90,0xCB,0x88,0x11,0x3A,0x94
.byte 0x65,0xC0,0x7C,0x63,0x87,0xF0,0x3C,0xAF
.byte 0xD6,0x25,0xE4,0x8B,0x38,0x0A,0xAC,0x72
.byte 0x21,0xD4,0xF8,0x07
a:
add r4,pc,#1
bx r4
.code 16
.align 2
.thumb
reset:
mov r0,#8
lsl r4,r0,#23
lsl r2,r0,#7
add r2,r2,#3
lsl r6,r2,#25
.byte 0x96,0x36
strh r2, [r4]

mainloop:
lsl r2,#4
ldrh r3,[r4,r2]
add r4,#0x62
.byte 0x50,0x69

strh r3,[r4,#0x1E+0x04]
strh r3,[r4,#0x1E]
strh r6,[r4]
strh r6,[r4,#0x02]
sub r4,#0x62

mov r0,#120
lsl r1,r0,#2

mvn r3,r3

up:
lsl r3,#25
bcc down
add r5,r7,r1
down:
bpl left
sub r5,r7,r1
left:
lsl r3,#2
bpl right
add r5,r7,#4
right:
bcc sav_sp
sub r5,r7,#4

sav_sp:
add r6,r5

timer:
vblank:
ldrh r2,[r4,#0x06]
cmp r2,#0x13
bne vblank
sub r0,#1
bne timer

ldrh r0,[r6]
putpixel:
inner_put:
str r6,[r6]
lsl r3,r2,#12
sub r3,r6,r3
lsl r3,r3,#8
bcc reset
lsl r3,r6,#8
adc r0,r0,r0
beq mainloop
#swi 0x26


